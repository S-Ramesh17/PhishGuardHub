<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Dashboard</title><link rel="stylesheet" href="css/styles.css"/></head><body><header><div class="container"><h1>Dashboard</h1></div></header><main class="container"><section class="card"><h3>Summary</h3><div id="summary">Loading...</div></section><section class="card"><h3>Reports</h3><textarea id="importData" placeholder="Paste extension JSON here" style="width:100%;height:120px"></textarea><br/><button id="importBtn">Import</button><button id="exportPdf">Export PDF</button><div id="table" class="table"></div></section></main><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script src="js/chart-handler.js"></script><script src="js/pdf-generator.js"></script><script>async function loadFromExtension(){ try{ if(typeof chrome !== 'undefined' && chrome.storage){ const data = await new Promise(res => chrome.storage.sync.get({ phishshield_reports: [] }, res)); populate(data.phishshield_reports || []); return; } }catch(e){} document.getElementById('summary').innerText = 'No extension data available. Paste JSON.' } function populate(arr){ const total = arr.length; const phish = arr.filter(r=>r.detected).length; const safe = total - phish; document.getElementById('summary').innerText = `Total: ${total} | Phishing: ${phish} | Safe: ${safe}`; document.getElementById('table').innerHTML = arr.map(r=>`<div>${new Date(r.timestamp).toLocaleString()} - ${r.url} - ${r.detected}</div>`).join('') || '<div>No reports</div>'; window.renderPieChart([safe, phish]); window.currentReports = arr; } document.getElementById('importBtn').addEventListener('click', ()=>{ try{ const arr = JSON.parse(document.getElementById('importData').value || '[]'); populate(arr); }catch(e){ alert('Invalid JSON'); } }); document.getElementById('exportPdf').addEventListener('click', ()=>{ const lines = (window.currentReports || []).map(r=>`${r.timestamp} - ${r.url} - ${r.detected}`).join('\n') || 'No reports'; window.generatePdfFromTable(lines); }); loadFromExtension();</script></body></html>